version: '3.8'

services:
  todos:
    image: dotnet/todos
    build:
      context: .
    ports:
      - "6001:8080"
    environment:
      ASPNETCORE_ENVIRONMENT: "Development"
      DatabaseOption__ConnectionString: "User ID=postgres;Password=changeme;Host=postgres;Port=5432;Database=postgres;"
      SwaggerOption__ApplicationTitle: "Todos API Docker"
      LoggingOption__ApplicationName: "Todos API Docker"
    depends_on:
      - postgres

  postgres:
    image: postgres
    ports:
      - "5432:5432"
    environment:
      POSTGRES_PASSWORD: "changeme"
    volumes:
      - ./Volumes/postgres:/var/lib/postgresql/data
